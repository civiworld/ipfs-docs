---
title: Persistence
description: Learn about how IPFS treats persistence and permanence on the web and how pinning can help keep data from being discarded.
---

# 持久性、永久性和固定性

了解 IPFS 固定背后的概念，以及持久性、永久性和固定之间的区别。

## 持久性与永久性

IPFS 的一个目标是通过让用户存储数据来保存人类的历史，同时将数据丢失或意外删除的风险降至最低。这通常被称为永久性。但永久性 _实际上_ 是什么意思，为什么它很重要？

2011 年的一项研究发现，网页的平均寿命为 100 天，之后就会永远消失。我们这个时代的主要媒介如此脆弱是不够的。IPFS 可以保留你希望存储的文件的每个版本，并可以轻松设置用于镜像数据的弹性网络。

IPFS 网络上的节点可以自动缓存它们下载的资源，并将这些资源保留给其他节点。该系统依赖于节点是否愿意并能够缓存并与网络共享资源。存储空间是有限的，因此节点需要清除一些先前缓存的资源，以便为新资源腾出空间。这个过程称为 _垃圾收集_。

为了确保数据在 IPFS 上 _持久_，并且在垃圾收集期间不会被删除，[可以将数据固定](../how-to/pin-files.md) 到一个或多个 IPFS 节点。固定功能可让你控制磁盘空间和数据保留。因此，你应该使用该控制来无限期地固定你希望保留在 IPFS 上的任何内容。

## 垃圾收集

[垃圾收集](<https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)>) 是一种广泛用于软件开发的自动资源管理形式。垃圾收集器尝试回收不再使用的对象占用的内存。 IPFS 使用垃圾收集功能，通过删除其认为不再需要的数据来释放 IPFS 节点上的磁盘空间。

## 上下文中的固定

IPFS 节点可以根据不同类型的用户事件保护数据免遭垃圾收集：

- 通用方法是添加低级 [本地固定](../how-to/pin-files.md)。这适用于所有数据类型，可以手动完成，但如果你使用 CLI 命令 [`ipfs add`](../reference/kubo/cli.md#ipfs-add) 添加文件，你的 IPFS 节点将自动为你固定该文件。
- 处理文件和目录时，更好的方法可能是将它们添加到本地 [可变文件系统 (MFS)](glossary.md#mfs)。这可以像本地固定一样保护数据免遭垃圾收集，但管理起来更容易一些。

:::tip
如果你想了解有关固定如何融入 IPFS 中数据的整体生命周期的更多信息，请查看 [IPFS Camp _DWeb 中的数据生命周期_](https://www.youtube.com/watch?v=fLUq0RkiTBA) 的课程。
:::

## 固定服务

为了确保保留重要数据，你可能需要使用固定服务。这些服务运行大量 IPFS 节点，并允许用户付费将数据固定在这些节点上。某些服务为新用户提供免费存储限额。固定服务在以下情况下很方便：

- 你没有太多磁盘空间，但你想确保数据保留。
- 你的计算机是笔记本电脑、手机或平板电脑，会间歇性地连接到网络。尽管如此，你仍然希望能够随时随地访问 IPFS 上的数据，即使你添加数据的设备处于离线状态。
- 你需要一个备份，以确保如果你不小心删除或将数据作为垃圾收集到自己的计算机上，你的数据始终可以从网络上的另一台计算机获取。

一些可用的固定服务提供商是：

:::warning
下面列出的一些固定服务由第三方公司运营。无法保证这些第三方公司将继续维护其固定服务。强烈建议你在使用固定服务托管数据之前对其进行彻底研究。
:::

- [4EVERLAND Bucket](https://www.4everland.org/bucket/)
- [Filebase](https://filebase.com/)
- [NFT.Storage](https://nft.storage/)
- [Pinata](https://pinata.cloud/)
- [Scaleway](https://labs.scaleway.com/en/ipfs-pinning/)
- [Web3.Storage](https://web3.storage/)

了解如何 [使用远程固定服务](../how-to/work-with-pinning-services.md)。

## 长期存储

使用个人 IPFS 节点存储数据很容易，但可能会不方便，因为你必须管理自己的硬件。这个问题催生了 _pinning 服务_·，这是一种付费服务，允许你将数据上传到远程托管的 IPFS 节点并随时检索。然而，虽然付费使用 pinning 服务来存储数据是一种方便的解决方法，但它仍然需要有人承担存储这些数据的成本。如果该赞助商停止为该 pinning 付费，内容可能会完全丢失。虽然 IPFS 保证网络上的任何内容都是可发现的，但它不能保证任何内容都是持久可用的。这就是 [Filecoin](https://filecoin.io) 的用武之地。

### 使用 Filecoin 存储数据

[Filecoin](https://filecoin.io) 是一个去中心化的存储网络，存储提供商将其存储空间出租给客户。客户和存储提供商就存储多少数据、存储多长时间以及存储成本达成一致。该协议称为 _交易_。一旦双方同意交易，客户端就会将数据发送给存储提供商，存储提供商会定期验证他们是否正确存储了数据。当客户端想要取回数据时，他们会向存储提供商发送请求，存储提供商会启动将数据传输回客户端的过程。有关 Filecoin 工作原理的更多信息，请参阅 [官方 Filecoin 文档 →](https://docs.filecoin.io/about/basics/how-filecoin-works/)

Filecoin 为用户提供了可靠的长期存储解决方案。但是，也有一些限制需要考虑。检索过程并不总是像 IPFS 固定服务那样快，并且 Filecoin 存储提供商接受的最小文件大小可能是几 GiB。此外，对于不熟悉区块链交易或不习惯在命令行中工作的新用户来说，创建存储交易的过程可能看起来很复杂。

### IPFS + Filecoin 解决方案

幸运的是，越来越多的工具和服务提供商帮助简化了通过 IPFS 提供内容的过程，同时还通过 Filecoin 保存数据。这些解决方案通过充当 IPFS 固定服务和 Filecoin 存储平台，使使用分散协议存储数据变得简单。将两者结合起来意味着当你上传文件时，该文件可立即下载。此外，组合的 IPFS + Filecoin 解决方案将定期捆绑数据并与信誉良好的 Filecoin 存储提供商达成协议，确保数据可长期存储。许多解决方案包括 API 客户端库，供开发人员集成到他们的应用程序和服务中，以及用于快速管理和检查文件的 Web 界面。